# Docker Compose para Angular Fuse App
# Compatible con Easypanel y despliegue manual

version: '3.8'

services:
  # Aplicación Angular con Nginx
  fuse-app:
    build:
      context: .
      dockerfile: Dockerfile

    # Nombre del contenedor
    container_name: fuse-app

    # Puerto mapping: HOST_PORT:CONTAINER_PORT
    # Cambia 8080 por el puerto que prefieras en el host
    ports:
      - "8080:80"

    # Política de reinicio
    restart: unless-stopped

    # Variables de entorno (opcional)
    environment:
      - NODE_ENV=production

    # Volumes (si necesitas montar archivos en desarrollo)
    # volumes:
    #   - ./dist/fuse:/usr/share/nginx/html
    #   - ./nginx.conf:/etc/nginx/conf.d/default.conf

    # Health check
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/"]
      interval: 30s
      timeout: 3s
      start_period: 5s
      retries: 3

    # Networking
    networks:
      - fuse-network

    # Labels para Easypanel (si aplica)
    labels:
      - "easypanel.managed=true"
      - "com.example.description=Angular Fuse Admin App"

# Red personalizada
networks:
  fuse-network:
    driver: bridge

# Volumes (si necesitas persistencia)
# volumes:
#   fuse-data:
